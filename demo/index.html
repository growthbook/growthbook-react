<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>Growth Book React Demo</title>

  <!-- Bootstrap core CSS -->
  <link href="https://getbootstrap.com/docs/4.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/themes/prism-okaidia.min.css" rel="stylesheet">

  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/components/prism-core.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/plugins/autoloader/prism-autoloader.min.js"></script>
  <script>
    try {
      window.sessionStorage.setItem('gbdev_open', '1');
    }
    catch(e) {
      // Ignore session storage errors
    }
  </script>
</head>

<body>
  <div class="container mt-3">
    <h1 class="text-center">Growth Book Demo</h1>
    <div id="root"></div>
    <hr/>
    <div class="row">
      <div class="col">
        <h3>Step 1: Wrap your app in GrowthBookProvider</h3>
        <pre><code class="language-jsx">import {GrowthBookClient, GrowthBookProvider} from '@growthbook/growthbook-react';

// Create a client and setup tracking
const client = new GrowthBookClient({
  onExperimentViewed: ({experimentId, variationId}) => {
    analytics.track("Experiment Viewed", {experimentId, variationId});
  }
});

// Create the user you want to experiment on
const user = client.user({id: "1"}); // TODO: pull id from Auth system

export default function App() {
  // Wrap your app in a GrowthBookProvider component
  return (
    &lt;GrowthBookProvider user={user}&gt;
      &lt;OtherComponent/&gt;
    &lt;/GrowthBookProvider&gt;
  )
}</code></pre>
      </div>
      <div class="col">
        <h3>Step 2: Run an Experiment!</h3>
        <pre><code class="language-jsx">export default function OtherComponent() {
  const { value } = useExperiment({
    key: "headline",
    variations: [
      "Hello World",
      "Hello Galaxy",
      "Hello Universe"
    ]
  });

  return <h1>{value}</h1>
}</code></pre>
      <p class="text-center">
        <a href="https://github.com/growthbook/growthbook-react#readme">View full README on GitHub</a>
      </p>
      </div>
    </div>
  </div>

  <script type="text/babel" data-type="module">
import * as React from "https://jspm.dev/react";
import * as ReactDOM from "https://jspm.dev/react-dom";
import {
  GrowthBookClient, 
  GrowthBookProvider, 
  useExperiment
} from "https://jspm.dev/@growthbook/growthbook-react";

const client = new GrowthBookClient();
const user = client.user({id:"123"});

const Demo = function () { 
  const { value: headline } = useExperiment({
    key: "headline",
    variations: [
      "Hello World",
      "Hello Galaxy",
      "Hello Universe"
    ]
  });

  const { value: darkmode } = useExperiment({
    key: "darkmode",
    variations: [
      false,
      true
    ]
  });

  return (
    <div className="container p-5">
      <div className={'card ' + (darkmode ? 'bg-dark text-light' : 'bg-light text-dark')}>
        <div className="card-body mb-3">
          <h2>{headline}</h2>
          <p>Use the <strong>Growth Book Dev</strong> tool on the bottom left of the page to switch variations and take screenshots.</p>
        </div>
      </div>
    </div>
  )
}

const App = function () {
  return (
    <GrowthBookProvider user={user}>
      <Demo />
    </GrowthBookProvider>
  )
}

ReactDOM.render(<App/>, document.getElementById('root'));
  </script>
</body>

</html>